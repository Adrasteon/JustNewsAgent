
        <div class="consent-dashboard">
            <div class="dashboard-header">
                <h2>Your Consent Preferences</h2>
                <p>Manage your data processing consents below.</p>
            </div>

            <div class="dashboard-stats">
                <div class="stat-card">
                    <h3>Total Consents</h3>
                    <div class="stat-value">2</div>
                </div>
                <div class="stat-card">
                    <h3>Granted</h3>
                    <div class="stat-value">1</div>
                </div>
                <div class="stat-card">
                    <h3>Pending</h3>
                    <div class="stat-value">1</div>
                </div>
            </div>

            <div class="consent-table-container">
                <table class="consent-table">
                    <thead>
                        <tr>
                            <th>Consent Type</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Granted At</th>
                            <th>Expires</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                <tr>
                    <td>Data Processing</td>
                    <td>Process your data to provide our services</td>
                    <td><span class="status-badge status-granted">Granted</span></td>
                    <td>2024-01-15T10:30:00Z</td>
                    <td>2025-01-15T10:30:00Z</td>
                    <td>
                        <button class="btn-action btn-grant"
                                data-consent-type="data_processing"
                                style="display: none;">
                            Grant
                        </button>
                        <button class="btn-action btn-withdraw"
                                data-consent-type="data_processing"
                                >
                            Withdraw
                        </button>
                    </td>
                </tr>
            
                <tr>
                    <td>Usage Analytics</td>
                    <td>Collect anonymous usage statistics</td>
                    <td><span class="status-badge status-denied">Not Granted</span></td>
                    <td>None</td>
                    <td>Never</td>
                    <td>
                        <button class="btn-action btn-grant"
                                data-consent-type="analytics"
                                >
                            Grant
                        </button>
                        <button class="btn-action btn-withdraw"
                                data-consent-type="analytics"
                                style="display: none;">
                            Withdraw
                        </button>
                    </td>
                </tr>
            
                    </tbody>
                </table>
            </div>

            <div class="dashboard-actions">
                <button id="export-consents" class="btn btn-outline">Export Consent Data</button>
                <button id="withdraw-all" class="btn btn-danger">Withdraw All Consents</button>
            </div>
        </div>

        <style>
            
            .consent-dashboard {
                max-width: 1200px;
                margin: 0 auto;
                padding: 24px;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            }

            .dashboard-header {
                margin-bottom: 32px;
                text-align: center;
            }

            .dashboard-header h2 {
                margin: 0 0 8px 0;
                font-size: 28px;
                font-weight: 600;
                color: #1a202c;
            }

            .dashboard-header p {
                margin: 0;
                font-size: 16px;
                color: #4a5568;
            }

            .dashboard-stats {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 16px;
                margin-bottom: 32px;
            }

            .stat-card {
                background: white;
                border: 1px solid #e2e8f0;
                border-radius: 8px;
                padding: 20px;
                text-align: center;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            }

            .stat-card h3 {
                margin: 0 0 8px 0;
                font-size: 14px;
                font-weight: 500;
                color: #718096;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            .stat-value {
                font-size: 32px;
                font-weight: 700;
                color: #2d3748;
            }

            .consent-table-container {
                background: white;
                border: 1px solid #e2e8f0;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                margin-bottom: 24px;
            }

            .consent-table {
                width: 100%;
                border-collapse: collapse;
            }

            .consent-table th {
                background: #f8fafc;
                padding: 12px 16px;
                text-align: left;
                font-size: 14px;
                font-weight: 600;
                color: #4a5568;
                border-bottom: 1px solid #e2e8f0;
            }

            .consent-table td {
                padding: 12px 16px;
                border-bottom: 1px solid #e2e8f0;
                font-size: 14px;
                color: #4a5568;
            }

            .consent-table tr:hover {
                background: #f8fafc;
            }

            .status-badge {
                padding: 4px 8px;
                border-radius: 12px;
                font-size: 12px;
                font-weight: 500;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            .status-granted {
                background: #c6f6d5;
                color: #22543d;
            }

            .status-denied {
                background: #fed7d7;
                color: #742a2a;
            }

            .btn-action {
                padding: 6px 12px;
                border: none;
                border-radius: 4px;
                font-size: 12px;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.2s;
                margin-right: 4px;
            }

            .btn-grant {
                background: #3182ce;
                color: white;
            }

            .btn-grant:hover {
                background: #2c5282;
            }

            .btn-withdraw {
                background: #e53e3e;
                color: white;
            }

            .btn-withdraw:hover {
                background: #c53030;
            }

            .dashboard-actions {
                display: flex;
                gap: 12px;
                justify-content: center;
                flex-wrap: wrap;
            }

            .btn-danger {
                background: #e53e3e;
                color: white;
            }

            .btn-danger:hover {
                background: #c53030;
            }

            @media (max-width: 768px) {
                .consent-dashboard {
                    padding: 16px;
                }

                .dashboard-stats {
                    grid-template-columns: repeat(2, 1fr);
                }

                .consent-table-container {
                    overflow-x: auto;
                }

                .consent-table {
                    min-width: 600px;
                }

                .dashboard-actions {
                    flex-direction: column;
                }

                .dashboard-actions .btn {
                    width: 100%;
                }
            }
        
        </style>

        <script>
            
            document.addEventListener('DOMContentLoaded', function() {
                const exportBtn = document.getElementById('export-consents');
                const withdrawAllBtn = document.getElementById('withdraw-all');
                const grantBtns = document.querySelectorAll('.btn-grant');
                const withdrawBtns = document.querySelectorAll('.btn-withdraw');

                // Export consents
                exportBtn.addEventListener('click', function() {
                    fetch('/auth/consent/export', {
                        method: 'GET',
                        headers: {
                            'Authorization': 'Bearer ' + getAuthToken()
                        }
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'success') {
                            const blob = new Blob([JSON.stringify(data.data, null, 2)], {
                                type: 'application/json'
                            });
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = 'consent-data.json';
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            URL.revokeObjectURL(url);
                        } else {
                            alert('Error exporting consent data.');
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error exporting consent data.');
                    });
                });

                // Withdraw all consents
                withdrawAllBtn.addEventListener('click', function() {
                    if (confirm('Are you sure you want to withdraw all consents? This action cannot be undone.')) {
                        fetch('/auth/consent/withdraw-all', {
                            method: 'POST',
                            headers: {
                                'Authorization': 'Bearer ' + getAuthToken(),
                                'Content-Type': 'application/json'
                            }
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.status === 'success') {
                                location.reload();
                            } else {
                                alert('Error withdrawing consents.');
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            alert('Error withdrawing consents.');
                        });
                    }
                });

                // Individual consent actions
                grantBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const consentType = this.dataset.consentType;
                        updateConsent(consentType, true);
                    });
                });

                withdrawBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const consentType = this.dataset.consentType;
                        updateConsent(consentType, false);
                    });
                });

                function updateConsent(consentType, granted) {
                    fetch('/auth/consent/update', {
                        method: 'POST',
                        headers: {
                            'Authorization': 'Bearer ' + getAuthToken(),
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            consent_type: consentType,
                            granted: granted
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'success') {
                            location.reload();
                        } else {
                            alert('Error updating consent.');
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error updating consent.');
                    });
                }

                function getAuthToken() {
                    return localStorage.getItem('auth_token') || '';
                }
            });
        
        </script>
        