# Jinja2 Template for JustNewsAgent Environment Configuration
# This template generates environment-specific configuration files

# Database Configuration
POSTGRES_HOST={{ postgres_host | default('localhost') }}
POSTGRES_PORT={{ postgres_port | default(5432) }}
POSTGRES_DB={{ postgres_db | default('justnews') }}
POSTGRES_USER={{ postgres_user | default('justnews') }}
POSTGRES_PASSWORD={{ postgres_password | default('change_me_in_production') }}

# Redis Configuration
REDIS_HOST={{ redis_host | default('localhost') }}
REDIS_PORT={{ redis_port | default(6379) }}
REDIS_PASSWORD={{ redis_password | default('') }}

# GPU Configuration
GPU_ORCHESTRATOR_HOST={{ gpu_orchestrator_host | default('localhost') }}
GPU_ORCHESTRATOR_PORT={{ gpu_orchestrator_port | default(8014) }}
CUDA_VISIBLE_DEVICES={{ cuda_visible_devices | default('0') }}

# MCP Bus Configuration
MCP_BUS_HOST={{ mcp_bus_host | default('localhost') }}
MCP_BUS_PORT={{ mcp_bus_port | default(8000) }}

# Monitoring Configuration
GRAFANA_ADMIN_PASSWORD={{ grafana_admin_password | default('admin') }}
PROMETHEUS_RETENTION_TIME={{ prometheus_retention_time | default('30d') }}
LOG_LEVEL={{ log_level | default('INFO') }}
LOG_FORMAT={{ log_format | default('json') }}

# Security Configuration
SECRET_KEY={{ secret_key | default('change_me_in_production') }}
JWT_SECRET_KEY={{ jwt_secret_key | default('change_me_in_production') }}

# Service Configuration
DEPLOY_ENV={{ deploy_env | default('development') }}
DEPLOY_TARGET={{ deploy_target | default('docker-compose') }}

# Environment-specific overrides
{% if deploy_env == 'production' %}
LOG_LEVEL=WARNING
LOG_FORMAT=json
{% elif deploy_env == 'staging' %}
LOG_LEVEL=INFO
LOG_FORMAT=json
{% elif deploy_env == 'development' %}
LOG_LEVEL=DEBUG
LOG_FORMAT=text
{% endif %}

# Target-specific configuration
{% if deploy_target == 'docker-compose' %}
POSTGRES_HOST=postgres
REDIS_HOST=redis
MCP_BUS_HOST=mcp-bus
{% elif deploy_target == 'kubernetes' %}
# Kubernetes service names
POSTGRES_HOST=postgres-service
REDIS_HOST=redis-service
MCP_BUS_HOST=mcp-bus-service
{% endif %}

# GPU Configuration by environment
{% if deploy_env == 'production' %}
CUDA_VISIBLE_DEVICES=all
{% elif deploy_env == 'development' %}
CUDA_VISIBLE_DEVICES=0
{% endif %}